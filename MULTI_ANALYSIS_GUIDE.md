# 多币种分析功能使用指南

## 📚 功能概述

系统现在支持两种分析模式：

### 1. 单币种分析器 (`ai_analyzer.py`)
- **功能**: 分析指定单个币种的市场数据
- **支持币种**: ETH, BTC, BNB, SOL, BERA
- **输出**: 该币种的详细分析和交易建议

### 2. 多币种对比分析器 (`multi_analyzer.py`)
- **功能**: 同时分析多个币种并进行对比
- **支持币种**: ETH, BTC, BNB, SOL, BERA
- **输出**: 
  - 每个币种的详细分析
  - 币种对比排名
  - 投资组合建议

---

## 🚀 使用方法

### 方式一：单币种分析

#### 分析 ETH（默认）
```powershell
python ai_analyzer.py
```

#### 分析 BTC
```powershell
python ai_analyzer.py btcusdt
```

#### 分析 BNB
```powershell
python ai_analyzer.py bnbusdt
```

#### 分析 SOL
```powershell
python ai_analyzer.py solusdt
```

#### 分析 BERA
```powershell
python ai_analyzer.py berausdt
```

---

### 方式二：多币种对比分析

#### 分析所有主流币种（默认: ETH, BTC, BNB, SOL）
```powershell
python multi_analyzer.py
```

#### 自定义分析币种组合
```powershell
# 只分析 ETH 和 BTC
python multi_analyzer.py ethusdt btcusdt

# 分析 BTC, BNB, SOL
python multi_analyzer.py btcusdt bnbusdt solusdt

# 分析所有币种包括 BERA
python multi_analyzer.py ethusdt btcusdt bnbusdt solusdt berausdt
```

---

## 📊 输出说明

### 单币种分析输出

```
======================================================================
🪙 币种: BTC (BTCUSDT)
⏰ 分析时间: 2024-XX-XX XX:XX:XX
======================================================================

📊 正在获取数据...

💹 当前价格: $45000.00
📈 买卖比: 1.25
📊 订单簿比: 1.15
⛓️  交易所净流出: 150.50 BTC
⛽ Gas价格: 25.00 Gwei

🤖 AI分析中...
✅ LM Studio connected successfully

----------------------------------------------------------------------
[AI 分析结果或规则引擎信号]
----------------------------------------------------------------------
```

### 多币种对比分析输出

```
╔════════════════════════════════════════════════════════════════════╗
║                    多币种智能分析系统                              ║
╚════════════════════════════════════════════════════════════════════╝

✅ LM Studio 已连接

======================================================================
🔍 多币种市场分析
⏰ 分析时间: 2024-XX-XX XX:XX:XX
======================================================================

📊 正在分析 ETH...
✅ ETH 分析完成

📊 正在分析 BTC...
✅ BTC 分析完成

[... 更多币种 ...]

======================================================================
📋 详细分析报告
======================================================================

──────────────────────────────────────────────────────────────────────
🪙 BTC (BTCUSDT)
──────────────────────────────────────────────────────────────────────
💹 当前价格: $45000.00
📈 24h涨跌: +2.50%
📊 买卖比: 1.25
📚 订单簿比: 1.15
📉 价格趋势: rising

[AI 分析结果]

[... ETH, BNB, SOL 等币种的详细分析 ...]

======================================================================
📊 币种对比分析
======================================================================

排名 | 币种 | 得分 | 24h涨跌 | 买卖比 | 趋势 | 当前价格
----------------------------------------------------------------------
🥇 1  | BTC  |  +5  |  +2.50% |  1.25  | 📈   | $45,000.00
🥈 2  | ETH  |  +3  |  +1.80% |  1.18  | 📈   | $2,500.00
🥉 3  | SOL  |  +1  |  +0.50% |  1.05  | ➡️   | $100.00
   4  | BNB  |  -1  |  -0.30% |  0.95  | 📉   | $350.00

======================================================================
💼 投资组合建议
======================================================================

🟢 看涨信号:
  • BTC: 得分+5, 24h+2.50%, 买卖比1.25
  • ETH: 得分+3, 24h+1.80%, 买卖比1.18

🟡 中性观望:
  • SOL: 得分+1, 24h+0.50%, 买卖比1.05
  • BNB: 得分-1, 24h-0.30%, 买卖比0.95

🔴 看跌信号:
  • 暂无

📝 综合建议:
  1. 优先关注: BTC, ETH
  2. 建议配置: 重仓 BTC, 中仓 ETH
  3. 规避风险: 暂无

⚠️  风险提示:
  • 本分析仅供参考，不构成投资建议
  • 加密货币市场波动剧烈，请控制仓位
  • 建议设置止损点，做好风险管理

======================================================================
✅ 分析完成 | 时间: XX:XX:XX
======================================================================
```

---

## 🔧 技术说明

### 数据来源
- **交易数据**: 币安交易所 WebSocket 实时数据
- **订单簿**: 币安订单簿深度数据
- **链上数据**: 以太坊链上大额转账和交易所流动数据

### 分析指标
1. **买卖比**: 买入量 / 卖出量（> 1 表示买盘占优）
2. **订单簿比**: 买单量 / 卖单量
3. **价格趋势**: rising（上涨）/ falling（下跌）/ stable（稳定）
4. **24h涨跌**: 24小时价格变化百分比
5. **链上流动**: 交易所净流出（正值看涨，负值看跌）

### 评分规则（多币种对比）
- 买卖比 > 1.3: +2分
- 买卖比 > 1.1: +1分
- 订单簿比 > 1.3: +1分
- 价格趋势上涨: +1分
- 24h涨幅 > 5%: +2分
- 24h涨幅 > 2%: +1分

---

## 💡 使用建议

### 首次使用
1. 先运行 `start_multi.py` 采集至少 30 分钟的数据
2. 使用单币种分析测试各币种数据是否正常
3. 再使用多币种对比分析查看整体市场

### 定期分析
```powershell
# 每隔 5-10 分钟运行一次多币种分析
python multi_analyzer.py
```

### 与 Web UI 结合
```powershell
# 终端1: 运行数据采集
python start_multi.py

# 终端2: 运行 Web 界面
python multi_web_ui.py

# 终端3: 定期运行多币种分析
python multi_analyzer.py
```

---

## ⚠️ 注意事项

### BERA 币种
BERA 可能尚未在币安上市，如果分析时出现错误，建议：
- 从分析列表中移除 BERA
- 或者检查 BERA 是否已上市币安

### LM Studio
- 如果未安装或未启动 LM Studio，系统会自动使用规则引擎
- 规则引擎虽然简单，但也能提供基本的交易信号

### 数据要求
- 建议至少采集 30 分钟数据后再进行分析
- 数据越多，分析结果越准确
- 24小时数据可提供更全面的市场视图

---

## 📝 示例工作流

### 完整分析流程
```powershell
# 1. 启动多币种数据采集
python start_multi.py

# 等待 30 分钟...

# 2. 运行多币种对比分析
python multi_analyzer.py

# 3. 单独深入分析表现最好的币种
python ai_analyzer.py btcusdt

# 4. 启动 Web 界面实时监控
python multi_web_ui.py
```

---

## 🆘 故障排查

### 问题：分析时提示 "暂无数据"
**解决**: 确保已运行数据采集并等待足够时间

### 问题：BERA 分析失败
**解决**: 从分析列表中移除 berausdt

### 问题：所有币种得分都接近 0
**解决**: 可能市场整体平稳，这是正常现象

---

## 📄 相关文件

- `ai_analyzer.py` - 单币种分析器
- `multi_analyzer.py` - 多币种对比分析器
- `start_multi.py` - 多币种数据采集启动脚本
- `multi_web_ui.py` - 多币种 Web 界面
- `binance_collector.py` - 币安数据采集模块

---

**免责声明**: 本工具仅供学习研究使用，不构成任何投资建议。加密货币投资有风险，请谨慎决策。
